const express = require('express');
const bodyParser = require('body-parser');

// Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ Express
const app = express();
const port = 53000;

// ÐÐ°ÑÑ‚Ñ€Ð¾Ð¸Ð¼ body-parser Ð´Ð»Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ñ JSON
app.use(bodyParser.json());

// Ð—Ð°Ð³Ð»ÑƒÑˆÐºÐ° Ð´Ð»Ñ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¹
const categories = [
  {
    name: "Ð—Ð´Ð¾Ñ€Ð¾Ð²ÑŒÐµ",
    emoji: "ðŸ’ª",
    subCategories: [
      { name: "Ð™Ð¾Ð³Ð°", description: "Ð™Ð¾Ð³Ð° - ÑÑ‚Ð¾ Ð¾Ñ‚Ð»Ð¸Ñ‡Ð½Ñ‹Ð¹ ÑÐ¿Ð¾ÑÐ¾Ð± ÑƒÐ»ÑƒÑ‡ÑˆÐ¸Ñ‚ÑŒ ÑÐ²Ð¾Ñ‘ Ð·Ð´Ð¾Ñ€Ð¾Ð²ÑŒÐµ Ð¸ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ð¸Ðµ!" },
      { name: "Ð’Ñ€Ð°Ñ‡", description: "Ð™Ð¾Ð³Ð° - ÑÑ‚Ð¾ Ð¾Ñ‚Ð»Ð¸Ñ‡Ð½Ñ‹Ð¹ ÑÐ¿Ð¾ÑÐ¾Ð± ÑƒÐ»ÑƒÑ‡ÑˆÐ¸Ñ‚ÑŒ ÑÐ²Ð¾Ñ‘ Ð·Ð´Ð¾Ñ€Ð¾Ð²ÑŒÐµ Ð¸ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ð¸Ðµ!" }
    ]
  },
  {
    name: "Science",
    emoji: "ðŸ”¬",
    subCategories: [
      { name: "Ð¢Ñ€ÐµÐ½ÐµÑ€", description: "Ð™Ð¾Ð³Ð° - ÑÑ‚Ð¾ Ð¾Ñ‚Ð»Ð¸Ñ‡Ð½Ñ‹Ð¹ ÑÐ¿Ð¾ÑÐ¾Ð± ÑƒÐ»ÑƒÑ‡ÑˆÐ¸Ñ‚ÑŒ ÑÐ²Ð¾Ñ‘ Ð·Ð´Ð¾Ñ€Ð¾Ð²ÑŒÐµ Ð¸ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ð¸Ðµ!" },
      { name: "Ð ÐµÑ†ÐµÐ¿Ñ‚Ñ‹", description: "Ð™Ð¾Ð³Ð° - ÑÑ‚Ð¾ Ð¾Ñ‚Ð»Ð¸Ñ‡Ð½Ñ‹Ð¹ ÑÐ¿Ð¾ÑÐ¾Ð± ÑƒÐ»ÑƒÑ‡ÑˆÐ¸Ñ‚ÑŒ ÑÐ²Ð¾Ñ‘ Ð·Ð´Ð¾Ñ€Ð¾Ð²ÑŒÐµ Ð¸ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ð¸Ðµ!" }
    ]
  },
  {
    name: "ÐžÐ±Ñ€Ð°Ð·Ð¾Ð²Ð°Ð½Ð¸Ðµ",
    emoji: "ðŸ“š",
    subCategories: [
      { name: "Ð¢Ñ€ÐµÐ½ÐµÑ€", description: "Ð™Ð¾Ð³Ð° - ÑÑ‚Ð¾ Ð¾Ñ‚Ð»Ð¸Ñ‡Ð½Ñ‹Ð¹ ÑÐ¿Ð¾ÑÐ¾Ð± ÑƒÐ»ÑƒÑ‡ÑˆÐ¸Ñ‚ÑŒ ÑÐ²Ð¾Ñ‘ Ð·Ð´Ð¾Ñ€Ð¾Ð²ÑŒÐµ Ð¸ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ð¸Ðµ!" },
      { name: "ÐšÐ¾ÑƒÑ‡", description: "Ð™Ð¾Ð³Ð° - ÑÑ‚Ð¾ Ð¾Ñ‚Ð»Ð¸Ñ‡Ð½Ñ‹Ð¹ ÑÐ¿Ð¾ÑÐ¾Ð± ÑƒÐ»ÑƒÑ‡ÑˆÐ¸Ñ‚ÑŒ ÑÐ²Ð¾Ñ‘ Ð·Ð´Ð¾Ñ€Ð¾Ð²ÑŒÐµ Ð¸ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ð¸Ðµ!" }
    ]
  }
];

// ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸Ðº Ð´Ð»Ñ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¹
app.get('/categories', (req, res) => {
  res.json(categories);
});

// ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸Ðº Ð´Ð»Ñ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ¸ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹ Ð² Ñ‡Ð°Ñ‚
app.post('/chat/send_message', (req, res) => {
  const { message } = req.body;

  if (!message) {
    return res.status(400).json({ error: 'Message is required' });
  }

  // Ð”Ð»Ñ Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ð°, Ð²ÑÐµÐ³Ð´Ð° Ð¾Ñ‚Ð²ÐµÑ‡Ð°ÐµÐ¼, Ñ‡Ñ‚Ð¾ ÑÐ°Ð¼Ð°Ñ Ð´Ð»Ð¸Ð½Ð½Ð°Ñ Ñ€ÐµÐºÐ° â€” ÑÑ‚Ð¾ ÐÐ¸Ð»
  const response = {
    message: 'Ð¡Ð°Ð¼Ð°Ñ Ð´Ð»Ð¸Ð½Ð½Ð°Ñ Ñ€ÐµÐºÐ° Ð² Ð¼Ð¸Ñ€Ðµ â€” Ñ€ÐµÐºÐ° ÐÐ¸Ð»...'
  };

  res.json(response);
});

// Ð—Ð°Ð¿ÑƒÑÐº ÑÐµÑ€Ð²ÐµÑ€Ð°
app.listen(53000, '10.0.2.2', () => {
    console.log(`Server is running at http://10.0.2.2:53000`);
});
